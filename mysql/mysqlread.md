# mysql的逻辑架构

- 第一层 连接 线程处理

- 第二层 查询缓存 解析器
	查询 分析 优化缓存 及所有的内置函数，所有跨存储引擎功能在这一层实现：存储过程 触发器 视图
- 第三层 优化器
	包含了存储引擎，存储引擎负责MySQL中数据的存储和提取。
- 存储引擎

###1.1.1
每个客户端连接都会在服务器进程中拥有一个线程，这个连接的查询只会在这个单独的线程中执行，该线程只能轮流在某个CPU或者CPU中运行。服务器会负责缓存线程，因此不需要为每一个新建的连接创建或者销毁线程。

###1.2.1 读写锁
在处理并发读或者写时，可以通过实现一个由两种类型的锁组成的锁系统来解决问题。这两种类型的锁通常被称为共享锁（shared lock）和排它锁（exclusive lock），也叫读锁（read lock）和写锁（write lock）
>读锁：
>读锁是共享的，或者说是相互不阻塞的。多个客户端在同一时刻可以读取同一个资源，而互不干扰。
>写锁：
>写锁则是排他的，也就是说一个写锁会阻塞其他的写锁和读锁。
>

###1.2.2 锁粒度
表锁：
表锁是MySQL中最基本的锁策略，并且是开销最小的策略。
行级锁：
##1.3 事务
###1.3.1 隔离级别
1. READ UNCOMMITTED（未提交读）
在该级别中，事务中的修改，即使没有提交，对其他事务也都是课件的。事务可以读取未提交的数据，这也被称为***脏读（Dirty Read）***。 在实际应用中一般很少使用。

2. READ COMMITTED（提交读）
3. REPEATABLE READ （可重复读）---- mysql默认的事务隔离级别
4. SERIALIZABLE （可串行化）




